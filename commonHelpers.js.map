{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\n// Функція для виконання HTTP-запиту до сервісу Pixabay\nexport async function fetchImages(query, page) {\n    const apiKey = \"39588460-df52399cf23d63ffd2a80219a\";\n    const perPage = 15;\n    const url = `https://pixabay.com/api/?key=${apiKey}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n    // Виконуємо HTTP-запит та повертаємо обіцянку\n    try {\n    // Отримання відповіді з сервера\n        const response = await axios.get(url);\n        console.log(response);\n    // Перевірка чи є результати запиту\n        if (!response.data.hits || response.data.hits.length === 0) {\n            return [];\n        }\n  \n        return response.data;\n    } catch (error) {\n        console.error(\"Error fetching images:\", error);\n        return [];\n    }\n};\n    \n    \n    \n    \n    \n    \n\n    \n    \n    \n    \n    \n    \n    \n    \n\n  \n\n\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n// Передаємо клас .gallery до SimpleLightbox для ініціалізації\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionDelay: 250,\n    captionsData: 'alt'\n});\n\nexport function renderImages(images) {\n   const gallery = document.querySelector(\".gallery\");\n   // Генеруємо розмітку для кожного нового елемента галереї\n const newImagesMarkup = galleryItemsMarkup(images);\n // Додаємо нові зображення до вже існуючої галереї\n   gallery.insertAdjacentHTML(\"beforeend\", newImagesMarkup);\n   \n    // Оновлюємо SimpleLightbox для нових зображень\n    lightbox.refresh();\n    \n function galleryItemsMarkup(arr) {\n    return arr\n        .map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n     <li class=\"gallery-item\">\n     <a class=\"gallery-link\" href=\"${largeImageURL}\">\n      <img class=\"gallery-image\"\n      src=\"${webformatURL}\"\n      alt=\"${tags}\"\n      loading=\"lazy\"\n      />\n     </a>\n     <ul class=\"image-details\">\n       <li class=\"activities\"><span class=\"details\">Likes</span> ${likes}</li>\n       <li class=\"activities\"><span class=\"details\">Views</span> ${views}</li>\n       <li class=\"activities\"><span class=\"details\">Comments</span> ${comments}</li>\n       <li class=\"activities\"><span class=\"details\">Downloads</span> ${downloads}</li>\n     </ul>\n     </li>`)\n        .join('');\n    };\n   \n};\n\n\n\n\n\n\n\n","\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { fetchImages } from \"./js/pixabay-api\";\nimport { renderImages } from \"./js/render-functions\"\n\n   // Підключаємо бібліотеку і вказуємо затримку підпису зображення з атрибуту alt\nconst lightbox = new SimpleLightbox('.gallery a', { captionDelay: 250,\ncaptionsData: 'alt', \n   });\n\n\n\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n     const loadMoreBtn = document.querySelector(\".load-more-btn\");\n    loadMoreBtn.addEventListener(\"click\", onBtnClick);\n   });\n\n\n\n   // Отримуємо посилання на форму за ідентифікатором\nconst searchForm = document.getElementById(\"search-form\");\n    // Додаємо обробник події \"submit\" до форми\nsearchForm.addEventListener(\"submit\", onFormSubmit);\n   // Отримуємо посилання на індикатор\nconst loader = document.querySelector(\".loader\"); \nconst loadMoreBtn = document.querySelector(\".load-more-btn\");\nloadMoreBtn.addEventListener(\"click\", onBtnClick);\n\nlet page = 1;\nlet query = \"\";\nconst perPage = 15;\nasync function onFormSubmit(event) {\n       event.preventDefault();\n       // Показуємо індикатор завантаження\n       showLoader();\n       //Очищуємо галерею\n       clearGallery();\n       // Отримуємо значення текстового поля пошуку\n       const searchInput = document.getElementById(\"search-input\");\n       // Видаляємо зайві пробіли з початку та кінця рядка\n       query = searchInput.value.trim();\n       // Перевіряємо, чи не є поле пошуку порожнім\n  if (query !== \"\") {\n    page = 1;\n    try {\n      const images = await fetchImages(query, page);\n       //Перевірка, чи остання сторінка - прибираємо кнопку, виводимо меседж\n      if (page * perPage >= images.totalHits) {\n        loadMoreBtn.style.display = \"none\";\n         iziToast.info({\n        title: \"Information\",\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: \"topRight\",\n        backgroundColor: \"red\",\n        maxWidth: \"500px\"\n      });\n      } else {\n         loadMoreBtn.style.display = \"block\";\n      }\n      //Очищуємо поле інпуту\n      searchInput.value = \"\";\n      if (!images || !images.hits) {\n             iziToast.info({\n               title: \"Information\",\n               message: \"Sorry, there are no images matching your search query. Please try again!\",\n               position: \"topRight\",\n               backgroundColor: \"red\",\n               maxWidth: \"500px\"\n             });\n         loadMoreBtn.style.display = \"none\";\n      } else {\n             renderImages(images.hits);\n             // Оновлюємо галерею після додавання нових елементів\n             lightbox.refresh();\n       \n           }       \n  }catch(error) {\n           console.error(\"Error fetching images:\", error);\n  }finally {\n           // Приховуємо індикатор завантаження\n           hideLoader();\n          };\n  }\n};\n\n\n\nasync function onBtnClick() {\n  page += 1;\n  showLoader();\n  try {\n    \n    const images = await fetchImages(query, page);\n\n    \n    if ((page * perPage) >= images.totalHits) {\n      loadMoreBtn.style.display = \"none\";\n    }\n    renderImages(images.hits);\n\n    const totalHits = images.totalHits;\n    const card = document.querySelector(\".gallery-item\");\n\n    if (card) {\n      const cardHeight = card.getBoundingClientRect().height;\n      window.scrollBy({\n        left: 0,\n        top: cardHeight * 2,\n        behavior: \"smooth\"\n      });\n    }\n    if (images.length === 0 || (totalHits > 0 && page >= Math.ceil(totalHits / 15))) {\n      loadMoreBtn.style.display = \"none\";\n      iziToast.info({\n        title: \"Information\",\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: \"topRight\",\n        backgroundColor: \"red\",\n        maxWidth: \"500px\"\n      });\n    } else {\n      loadMoreBtn.style.display = \"block\";\n    }\n  } catch (error) {\n    alert(error.message);\n  } finally {\n    hideLoader();\n  }\n};\n\n \nfunction showLoader() {\n   // Показуємо індикатор\n  loader.style.display = \"block\";\n};\n\nfunction hideLoader() {\n  // Приховуємо індикатор завантаження\n  loader.style.display = \"none\";\n};\n\n function clearGallery() {\n    const gallery = document.querySelector(\".gallery\");\n    gallery.innerHTML = \"\";\n};\n\n\n\n\n\n\n\n\n  "],"names":["fetchImages","query","page","url","response","axios","error","lightbox","SimpleLightbox","renderImages","images","gallery","newImagesMarkup","galleryItemsMarkup","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","onBtnClick","searchForm","onFormSubmit","loader","loadMoreBtn","perPage","event","showLoader","clearGallery","searchInput","iziToast","hideLoader","totalHits","card","cardHeight"],"mappings":"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"}